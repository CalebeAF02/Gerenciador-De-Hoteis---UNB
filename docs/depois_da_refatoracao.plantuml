@startuml
title Hotelaria_UnB_TP1 - Diagrama UML completo (PlantUML)

/'
Este diagrama foi gerado a partir do projeto anexado.
Ele organiza pacotes, classes, interfaces, DTOs, entidades, domínios, serviços,
apresentações e persistências, além de dependências e heranças.

Obs:
- Algumas implementações estão incompletas no código (métodos vazios), mas a estrutura é refletida fielmente.
- Os relacionamentos seguem #include e composição declarada nos headers e uso claro no .cpp.
- DTOs representam transferências entre persistência/serviço e apresentação.
'/


skinparam packageStyle rectangle
skinparam shadowing false
skinparam classAttributeIconSize 0
skinparam linetype ortho
skinparam defaultFontName Monospace

' ===========================================================================
' Pacote de libs (formatação, IO, menu, tabela, testes)
' ===========================================================================
package "libs" {
  package "formato" {
    class Formato {
      +TituloEmCaixa(titulo: string)
      +SeparadorDeCategoria(titulo: string)
      +OpcaoEmCaixa(texto: string, numero: int)
      +OpcaoEmCaixa(texto: string, numero: string)
      +OpcaoSimples(texto: string, numero: int)
      +RepetirCaracter(qnt: int, c: char)
      +RepetirCaracterMesmaLinha(qnt: int, c: char): string
    }
  }

  package "io" {
    class IO {
      +LerLinha(): string
      +LerOpcao(): string
      +Println(mensagem: string)
      +Print(mensagem: string)
      +tentarNovamente(): bool
    }
  }

  package "menu" {
    class MenuItem {
      -nome: string
      -valor: string
      -valorConstante: int
      +getNome(): string
      +getValor(): string
      +getValorConstante(): int
    }

    class Menu {
      -menuItens: vector<MenuItem>
      -contador: int
      +adcionarItens(nome: string): int
      +listar(): vector<MenuItem>
      +executa(tituloStr: string): int
    }

    interface ExibirMenu {
      +exibirMenu()
    }

    interface MenuCRUD {
      +criar()
      +ler()
      +atualizar()
      +remover()
    }
  }

  package "tabela" {
    class Atributo {
      -nome: string
      -valor: string
      +getNome(): string
      +getValor(): string
      +setNome(nome: string)
      +setValor(valor: string)
    }

    class Linha {
      -atributos: vector<shared_ptr<Atributo>>
      +atributo(nome: string, valor: string)
      +atributo(nome: string, valor: int)
      +getAtributos(): vector<shared_ptr<Atributo>>
    }

    class TamanhoAtributo {
      -nome: string
      -tamanho: int
      +getNome(): string
      +getTamanho(): int
      +setNome(nome: string)
      +setTamanho(tamanho: int)
    }

    class Tabela {
      -linhas: vector<shared_ptr<Linha>>
      +criarObj(): Linha*
      +exibirTabela(titulo: string)
    }

    Tabela "1" o-- "*" Linha
    Linha "*" o-- "*" Atributo
  }

  package "teste" {
    class InterfaceDeTeste {
      {static} -contTodalTestes: int
      {static} -contTodalTestesOk: int
      {static} -contTodalTestesProblema: int
      {static} -listaFalhas: vector<string>
      {static} +DEVE_DAR_ERRADO: int
      {static} +DEVE_DAR_CERTO: int
      +executar()
      {static} +checaResultado(esperando: int, obtido: int)
      {static} +apresentacaoTeste(valor: string)
      {static} +apresentacaoTeste(valor: int)
      {static} +registrarFalha(dominio: string, entrada: string, erro: string)
      {static} +mostrarRelatorioDeTestes()
      {static} +getTestes(): int
      {static} +getTestesOk(): int
      {static} +getTestesProblema(): int
    }

    class SmokeTeste {
      +testarDominio(esperando: int, valor_teste: string, dominio: string, funcao_validacao: function<void()>)
      +testarEntidade(esperando: int, valor_teste: string, entidade: string, funcao_validacao: function<void()>)
      +testarDominio<T>(esperando: int, valor_teste: T, dominio: string, funcao_validacao: function<void()>)
      +testarEntidade<T>(esperando: int, valor_teste: T, entidade: string, funcao_validacao: function<void()>)
    }

    SmokeTeste ..> InterfaceDeTeste
    InterfaceDeTeste ..> IO
    InterfaceDeTeste ..> Formato
  }
}


' ===========================================================================
' Pacote de utilitários e enum
' ===========================================================================
package "sistema.utilitarios" {
  package "enum" {
    enum StatusSolicitacaoHospedagem {
      PENDENTE = 0
      APROVADO = 1
      RECUSADO = 2
    }

    class EnumConversor {
      +StatusSolicitacaoHospedagemParaInteiro(status: StatusSolicitacaoHospedagem): int
      +InteiroParaStatusSolicitacaoHospedagem(valor: int): StatusSolicitacaoHospedagem
    }
    EnumConversor ..> StatusSolicitacaoHospedagem
  }

  class Utils {
    +verificaSeENumero(str: string): bool
  }
}


' ===========================================================================
' Pacote de sistema base e banco
' ===========================================================================
package "sistema" {
  class Versao {
    {static} +patch(): uint8_t
    {static} +minor(): uint8_t
    {static} +major(): uint64_t
    {static} +getValor(): uint64_t
    {static} +getData(): string
    {static} +getVersaoCompleta(): string
  }

  class BancoDeDados {
    -db: sqlite3*
    +getConexao(): sqlite3*
    +abrindoConexao(): bool
    +fechandoConexao(): bool
    +iniciar()
    -tabelaGerente(db: sqlite3*)
    -tabelaHospede(db: sqlite3*)
    -tabelaHotel(db: sqlite3*)
    -tabelaQuarto(db: sqlite3*)
    -tabelaReserva(db: sqlite3*)
    -tabelaSolicitacoesDeHospedagem(db: sqlite3*)
  }

  class Sistema {
    -executando: bool
    -contoladoraApresentacaoAcessoGerente: ControladoraApresentacaoAcessoGerente
    -contoladoraApresentacaoAcessoHospede: ControladoraApresentacaoAcessoHospede
    +iniciar()
    -exibirMenu()
    -getExecutandoSistema(): bool
    -sair()
  }

  package "HACKER" {
    class SistemaHacker {
      -servico: ControladoraApresentacaoAcessoGerente*
      +iniciar()
    }
  }

  Sistema ..> Versao
  Sistema ..> IO
  Sistema ..> Menu
  Sistema ..> ControladoraApresentacaoAcessoGerente
  Sistema ..> ControladoraApresentacaoAcessoHospede
  BancoDeDados ..> sqlite3
  SistemaHacker ..> Versao
  SistemaHacker ..> ControladoraApresentacaoAcessoGerente
}


' ===========================================================================
' Pacote de domínios e entidades
' ===========================================================================
package "sistema.objetos.dominios" {
  class Nome {
    -nomeStr: string
    +setValor(valor: string)
    +getValor(): string
    -validar(valor: string)
  }
  class Email {
    -emailStr: string
    +setValor(valor: string)
    +getValor(): string
    -validar(valor: string)
  }
  class Senha {
    -senhaStr: string
    +setValor(valor: string)
    +getValor(): string
    -validar(valor: string)
  }
  class Endereco {
    -enderecoStr: string
    +setValor(valor: string)
    +getValor(): string
    -validar(valor: string)
  }
  class Telefone {
    -telefoneStr: string
    +setValor(valor: string)
    +getValor(): string
    -validar(valor: string)
  }
  class Codigo {
    -codigoStr: string
    +setValor(valor: string)
    +getValor(): string
    -validar(valor: string)
  }
  class Numero {
    -numeroStr: string
    +setValor(valor: string)
    +getValor(): string
    -validar(valor: string)
  }
  class Ramal {
    -ramalStr: string
    +setValor(valor: string)
    +getValor(): string
    -validar(valor: string)
  }
  class Capacidade {
    -capacidadeInt: int
    +setValor(valor: int)
    +getValor(): int
    -validar(valor: int)
  }
  class Dinheiro {
    -valor: int
    +setValor(valor: int)
    +getValor(): int
    -validar(valor: int)
  }
  class Data {
    +dia: int
    +mes: int
    +ano: int
    +Data(dataStr: string)
    +toString(): string
    +setData(d: int, m: int, a: int)
    +getDia(): int
    +getMes(): int
    +getAno(): int
    -validar()
    {static} +JAN,FEV,MAR,ABR,MAI,JUN,JUL,AGO,SET,OUT,NOV,DEZ: int
  }
}

package "sistema.objetos.entidades" {
  class Pessoa {
    #nome: Nome
    #email: Email
    +Pessoa(nomeObj: Nome, emailObj: Email)
    +setPessoaNome(valor: Nome)
    +setPessoaEmail(valor: Email)
    +getNome(): string
    +getEmail(): string
  }

  class Gerente {
    -ramal: Ramal
    -senha: Senha
    +Gerente()
    +Gerente(nome: Nome, email: Email, ramal: Ramal, senha: Senha)
    +Gerente(dto: GerenteDTO)
    +setNome(newNome: Nome)
    +setEmail(newEmail: Email)
    +setRamal(newRamal: Ramal)
    +setSenha(newSenha: Senha)
    +getRamal(): string
    +getSenha(): string
  }

  class Hospede {
    -endereco: Endereco
    -cartao: Cartao
    +Hospede()
    +Hospede(nome: Nome, email: Email, endereco: Endereco, cartao: Cartao)
    +Hospede(dto: HospedeDTO)
    +setNome(newNome: Nome)
    +setEmail(newEmail: Email)
    +setEndereco(newEndereco: Endereco)
    +setCartao(newCartao: Cartao)
    +getEndereco(): string
    +getCartao(): string
  }

  class Hotel {
    -nome: Nome
    -endereco: Endereco
    -telefone: Telefone
    -codigo: Codigo
    +Hotel()
    +Hotel(nome: Nome, endereco: Endereco, telefone: Telefone, codigo: Codigo)
    +Hotel(dto: HotelDTO)
    +setNome(Nome)
    +setEndereco(Endereco)
    +setTelefone(Telefone)
    +setCodigo(Codigo)
    +getNome(): string
    +getEndereco(): string
    +getTelefone(): string
    +getCodigo(): string
  }

  class Quarto {
    -numero: Numero
    -capacidade: Capacidade
    -diaria: Dinheiro
    -ramal: Ramal
    +Quarto()
    +Quarto(numero: Numero, capacidade: Capacidade, diaria: Dinheiro, ramal: Ramal)
    +setNumero(Numero)
    +setCapacidade(Capacidade)
    +setDiaria(Dinheiro)
    +setRamal(Ramal)
    +getNumero(): string
    +getCapacidade(): int
    +getDiaria(): int
    +getRamal(): string
  }

  class Reserva {
    -chegada: Data
    -partida: Data
    -dinheiro: Dinheiro
    -codigo: Codigo
    +Reserva()
    +Reserva(chegada: Data, partida: Data, dinheiro: Dinheiro, codigo: Codigo)
    +setChegada(Data)
    +setPartida(Data)
    +setDinheiro(Dinheiro)
    +setCodigo(Codigo)
    +getChegada(): Data
    +getPartida(): Data
    +getDinheiro(): int
    +getCodigo(): string
  }

  class SolicitacaoHospedagem {
    -hospedeId: string
    -hotelId: string
    -quartoId: string
    -chegada: Data
    -partida: Data
    -status: StatusSolicitacaoHospedagem
    -motivoRecusa: string
    +SolicitacaoHospedagem()
    +SolicitacaoHospedagem(hospedeId: string, hotelId: string, quartoId: string, chegada: Data, partida: Data, status: StatusSolicitacaoHospedagem, motivoRecusa: string)
    +setHospedeId(id: string)
    +setHotelId(id: string)
    +setQuartoId(id: string)
    +setChegada(d: Data)
    +setPartida(d: Data)
    +setStatus(s: StatusSolicitacaoHospedagem)
    +setMotivoRecusa(motivo: string)
    +getHospedeId(): string
    +getHotelId(): string
    +getQuartoId(): string
    +getChegada(): Data
    +getPartida(): Data
    +getStatus(): StatusSolicitacaoHospedagem
    +getMotivoRecusa(): string
  }

  Gerente --|> Pessoa
  Hospede --|> Pessoa

  Pessoa o-- Nome
  Pessoa o-- Email
  Gerente o-- Ramal
  Gerente o-- Senha
  Hospede o-- Endereco
  Hospede o-- Cartao
  Hotel o-- Nome
  Hotel o-- Endereco
  Hotel o-- Telefone
  Hotel o-- Codigo
  Quarto o-- Numero
  Quarto o-- Capacidade
  Quarto o-- Dinheiro
  Quarto o-- Ramal
  Reserva o-- Data
  Reserva o-- Dinheiro
  Reserva o-- Codigo
  SolicitacaoHospedagem o-- Data
  SolicitacaoHospedagem o-- StatusSolicitacaoHospedagem
}

package "sistema.objetos.entidades_dto" {
  class PessoaDTO {
    -pessoaId: int
    -nome: string
    -email: string
    +getPessoaId(): int
    +setPessoaId(valor: int)
    +getNome(): string
    +setNome(valor: string)
    +getEmail(): string
    +setEmail(valor: string)
  }

  class GerenteDTO {
    -id_gerente: int
    -nome: string
    -email: string
    -ramal: string
    -senha: string
    +getId(): int
    +setGerenteId(valor: int)
    +getNome(): string
    +setNome(valor: string)
    +getEmail(): string
    +setEmail(valor: string)
    +getRamal(): string
    +setRamal(valor: string)
    +getSenha(): string
    +setSenha(valor: string)
  }

  class HospedeDTO {
    -id_hospede: int
    -nome: string
    -email: string
    -endereco: string
    -cartao: string
    +getId(): int
    +setId(valor: int)
    +getNome(): string
    +setNome(valor: string)
    +getEmail(): string
    +setEmail(valor: string)
    +getEndereco(): string
    +setEndereco(valor: string)
    +getCartao(): string
    +setCartao(valor: string)
  }

  class HotelDTO {
    -hotelId: int
    -nome: string
    -endereco: string
    -telefone: string
    -codigo: string
    +getId(): int
    +setId(valor: int)
    +getNome(): string
    +setNome(valor: string)
    +getEndereco(): string
    +setEndereco(valor: string)
    +getTelefone(): string
    +setTelefone(valor: string)
    +getCodigo(): string
    +setCodigo(valor: string)
  }

  class QuartoDTO {
    -quartoId: int
    -numero: string
    -capacidade: string
    -dinheiro: string
    -ramal: string
    +getQuartoId(): int
    +setQuartoId(valor: int)
    +getNumero(): string
    +setNumero(valor: string)
    +getCapacidade(): string
    +setCapacidade(valor: string)
    +getDinheiro(): string
    +setDinheiro(valor: string)
    +getRamal(): string
    +setRamal(valor: string)
  }

  class ReservaDTO {
    -reservaId: int
    -chegada: string
    -partida: string
    -dinheiro: string
    -codigo: string
    +getReservaId(): int
    +setReservaId(valor: int)
    +getChegada(): string
    +setChegada(valor: string)
    +getPartida(): string
    +setPartida(valor: string)
    +getDinheiro(): string
    +setDinheiro(valor: string)
    +getCodigo(): string
    +setCodigo(valor: string)
  }

  class SolicitacaoHospedagemDTO {
    -solicitacaoHospedagemId: int
    -hospedeId: int
    -hotelId: int
    -quartoId: int
    -chegada: string
    -partida: string
    -status: string
    -motivoRecusa: string
    +getSolicitacaoHospedagemId(): int
    +setSolicitacaoHospedagemId(valor: int)
    +getHospedeId(): int
    +setHospedeId(valor: int)
    +getHotelId(): int
    +setHotelId(valor: int)
    +getQuartoId(): int
    +setQuartoId(valor: int)
    +getChegada(): string
    +setChegada(valor: string)
    +getPartida(): string
    +setPartida(valor: string)
    +getStatus(): string
    +setStatus(valor: string)
    +getMotivoRecusa(): string
    +setMotivoRecusa(valor: string)
  }

  GerenteDTO <.. Gerente
  HospedeDTO <.. Hospede
  HotelDTO <.. Hotel
  QuartoDTO <.. Quarto
  ReservaDTO <.. Reserva
  SolicitacaoHospedagemDTO <.. SolicitacaoHospedagem
}


' ===========================================================================
' Pacote sub_sistema: acesso, autenticável, gerente, hospede, hotel, quarto, reserva
' ===========================================================================
package "sistema.sub_sistema" {

  package "pacote_acesso" {
    interface InterfaceApresentacaoAcesso {
      +exibirMenu()
      +~InterfaceApresentacaoAcesso()
    }

    ' Versão consolidada do projeto principal
    class ControladoraApresentacaoAcessoGerente {
      -apresentacao_autenticavel: InterfaceApresentacaoAutenticavel*
      -apresentacao_gerente: InterfaceApresentacaoGerente*
      -apresentacao_hospede: InterfaceApresentacaoHospede*
      -apresentacao_hotel: InterfaceApresentacaoHotel*
      -apresentacao_quarto: InterfaceApresentacaoQuarto*
      -apresentacao_reserva: InterfaceApresentacaoReserva*
      -estaAutenticado: bool
      +exibirMenu()
      +exibirMenuGerenciador()
    }
    ControladoraApresentacaoAcessoGerente --|> InterfaceApresentacaoAcesso

    class ControladoraApresentacaoAcessoHospede {
      +exibirMenu()
      +opcoesDeHospedagem()
      +solicitandoHospedagem()
      +statusDaSolicitandoHospedagem()
    }
    ControladoraApresentacaoAcessoHospede --|> InterfaceApresentacaoAcesso

    ControladoraApresentacaoAcessoGerente ..> InterfaceApresentacaoAutenticavel
    ControladoraApresentacaoAcessoGerente ..> InterfaceApresentacaoGerente
    ControladoraApresentacaoAcessoGerente ..> InterfaceApresentacaoHospede
    ControladoraApresentacaoAcessoGerente ..> InterfaceApresentacaoHotel
    ControladoraApresentacaoAcessoGerente ..> InterfaceApresentacaoQuarto
    ControladoraApresentacaoAcessoGerente ..> InterfaceApresentacaoReserva
    ControladoraApresentacaoAcessoGerente ..> IO
    ControladoraApresentacaoAcessoGerente ..> Menu
    ControladoraApresentacaoAcessoGerente ..> Tabela
    ControladoraApresentacaoAcessoGerente ..> Utils

    ControladoraApresentacaoAcessoHospede ..> IO
    ControladoraApresentacaoAcessoHospede ..> Menu
    ControladoraApresentacaoAcessoHospede ..> Formato
    ControladoraApresentacaoAcessoHospede ..> SolicitacaoHospedagem
    ControladoraApresentacaoAcessoHospede ..> ControladoraPersistenciaSolicitacaoHospedagem
    ControladoraApresentacaoAcessoHospede ..> Data
    ControladoraApresentacaoAcessoHospede ..> Utils
  }

  package "pacote_autenticavel" {
    interface InterfacePersistenciaAutenticavel {
      +autenticar(email: string, senha: string): bool
    }

    interface InterfaceServicoAutenticavel {
      +setControladoraPersistencia(p: InterfacePersistenciaAutenticavel*)
      +autenticar(email: Email, senha: Senha): bool
      +~InterfaceServicoAutenticavel()
    }

    interface InterfaceApresentacaoAutenticavel {
      +setControladoraServicoAutenticavel(s: InterfaceServicoAutenticavel*)
      +autenticar(): bool
      +setEstaAutenticado(estaAutenticado: bool)
      +getEstaAutenticado(): bool
      +~InterfaceApresentacaoAutenticavel()
    }

    class ControladoraApresentacaoAutenticavel {
      -servico: InterfaceServicoAutenticavel*
      -estaAutenticado: bool
      +setControladoraServicoAutenticavel(servico: InterfaceServicoAutenticavel*)
      +autenticar(): bool
      +setEstaAutenticado(estaAutenticado: bool)
      +getEstaAutenticado(): bool
      +getHacke(): InterfaceServicoAutenticavel*
    }
    ControladoraApresentacaoAutenticavel --|> InterfaceApresentacaoAutenticavel
    ControladoraApresentacaoAutenticavel ..> InterfaceServicoAutenticavel
    ControladoraApresentacaoAutenticavel ..> Email
    ControladoraApresentacaoAutenticavel ..> Senha
    ControladoraApresentacaoAutenticavel ..> IO
    ControladoraApresentacaoAutenticavel ..> Formato

    class ControladoraServicoAutenticavel {
      +autenticar(email: Email, senha: Senha): bool
    }
    ControladoraServicoAutenticavel --|> InterfaceServicoAutenticavel
    ControladoraServicoAutenticavel ..> ControladoraPersistenciaGerente
    ControladoraServicoAutenticavel ..> Email
    ControladoraServicoAutenticavel ..> Senha

    class ControladoraPersistenciaAutenticavel {
      +autenticar(email: string, senha: string): bool
    }
    ControladoraPersistenciaAutenticavel --|> InterfacePersistenciaAutenticavel
  }

  package "pacote_gerente" {
    interface InterfaceApresentacaoGerente {
      +setControladoraServicoPessoal(servico: InterfaceServicoGerente*)
      +exibirMenuCRUD()
      +~InterfaceApresentacaoGerente()
    }

    interface InterfacePersistenciaGerente {
      +inserir(gerente: Gerente): bool
      +autenticar(email: string, senha: string): bool
      +atualizar(email: Email, gerente: Gerente): bool
      +excluir(id: int): bool
      +listar(): vector<GerenteDTO>
      +pesquisar(id: int): optional<GerenteDTO>
      +~InterfacePersistenciaGerente()
    }

    interface InterfaceServicoGerente {
      +setControladoraPersistencia(persistencia: InterfacePersistenciaGerente*)
      +criar(gerente: Gerente): bool
      +editar(email: Email, gerenteAtualizado: Gerente): bool
      +remover(id: int): bool
      +listarTodos(): vector<GerenteDTO>
      +pesquisar(id: int): optional<GerenteDTO>
      +~InterfaceServicoGerente()
    }

    class ControladoraApresentacaoGerente {
      -servico: InterfaceServicoGerente*
      -executando: bool
      -estaAutenticado: bool
      +setControladoraServicoPessoal(servico: InterfaceServicoGerente*)
      +exibirMenuCRUD()
      +criar()
      +listar()
      +atualizar()
      +remover()
      +avaliarSolicitacoes()
    }
    ControladoraApresentacaoGerente --|> InterfaceApresentacaoGerente
    ControladoraApresentacaoGerente ..> InterfaceServicoGerente
    ControladoraApresentacaoGerente ..> IO
    ControladoraApresentacaoGerente ..> Menu
    ControladoraApresentacaoGerente ..> Tabela
    ControladoraApresentacaoGerente ..> Gerente
    ControladoraApresentacaoGerente ..> GerenteDTO
    ControladoraApresentacaoGerente ..> Utils
    ControladoraApresentacaoGerente ..> Senha
    ControladoraApresentacaoGerente ..> Ramal
    ControladoraApresentacaoGerente ..> Nome
    ControladoraApresentacaoGerente ..> Email

    class ControladoraPersistenciaGerente {
      +inserir(gerente: Gerente): bool
      +autenticar(email: string, senha: string): bool
      +listar(): vector<GerenteDTO>
      +pesquisar(id: int): optional<GerenteDTO>
      +atualizar(email: Email, gerente: Gerente): bool
      +excluir(id: int): bool
    }
    ControladoraPersistenciaGerente --|> InterfacePersistenciaGerente
    ControladoraPersistenciaGerente ..> BancoDeDados
    ControladoraPersistenciaGerente ..> sqlite3
    ControladoraPersistenciaGerente ..> Gerente
    ControladoraPersistenciaGerente ..> GerenteDTO
    ControladoraPersistenciaGerente ..> Email

    class ControladoraServicoGerente {
      -persistencia: InterfacePersistenciaGerente*
      -executando: bool
      +setControladoraPersistencia(persistencia: InterfacePersistenciaGerente*)
      +criar(gerente: Gerente): bool
      +editar(email: Email, gerenteAtualizado: Gerente): bool
      +remover(id: int): bool
      +listarTodos(): vector<GerenteDTO>
      +pesquisar(id: int): optional<GerenteDTO>
    }
    ControladoraServicoGerente --|> InterfaceServicoGerente
    ControladoraServicoGerente ..> InterfacePersistenciaGerente
    ControladoraServicoGerente ..> ControladoraPersistenciaGerente
    ControladoraServicoGerente ..> Gerente
    ControladoraServicoGerente ..> GerenteDTO
    ControladoraServicoGerente ..> Email
  }

  package "pacote_hospede" {
    interface InterfaceApresentacaoHospede {
      +setControladoraServicoHospede(servico: InterfaceServicoHospede*)
      +exibirMenuCRUD()
      +~InterfaceApresentacaoHospede()
    }

    interface InterfacePersistenciaHospede {
      +inserir(hospede: Hospede): bool
      +autenticar(email: string, senha: string): bool
      +atualizar(email: Email, hospede: Hospede): bool
      +excluir(id: int): bool
      +listar(): vector<HospedeDTO>
      +pesquisar(id: int): optional<HospedeDTO>
      +~InterfacePersistenciaHospede()
    }

    interface InterfaceServicoHospede {
      +setControladoraPersistencia(persistencia: InterfacePersistenciaHospede*)
      +criar(hospede: Hospede): bool
      +editar(email: Email, hospedeAtualizado: Hospede): bool
      +remover(id: int): bool
      +listarTodos(): vector<HospedeDTO>
      +pesquisar(id: int): optional<HospedeDTO>
      +~InterfaceServicoHospede()
    }

    class ControladoraApresentacaoHospede {
      -servico: InterfaceServicoHospede*
      -executando: bool
      +setControladoraServicoHospede(servico: InterfaceServicoHospede*)
      +exibirMenuCRUD()
      +criar()
      +listar()
      +atualizar()
      +remover()
    }
    ControladoraApresentacaoHospede --|> InterfaceApresentacaoHospede
    ControladoraApresentacaoHospede ..> InterfaceServicoHospede
    ControladoraApresentacaoHospede ..> IO
    ControladoraApresentacaoHospede ..> Menu
    ControladoraApresentacaoHospede ..> Tabela
    ControladoraApresentacaoHospede ..> Hospede
    ControladoraApresentacaoHospede ..> HospedeDTO
    ControladoraApresentacaoHospede ..> Nome
    ControladoraApresentacaoHospede ..> Email
    ControladoraApresentacaoHospede ..> Endereco
    ControladoraApresentacaoHospede ..> Cartao
    ControladoraApresentacaoHospede ..> Utils

    class ControladoraPersistenciaHospede {
      -caminho: string
      +inserir(hospede: Hospede): bool
      +autenticar(email: string, senha: string): bool
      +listar(): vector<HospedeDTO>
      +pesquisar(id: int): optional<HospedeDTO>
      +atualizar(email: Email, hospede: Hospede): bool
      +excluir(id: int): bool
    }
    ControladoraPersistenciaHospede --|> InterfacePersistenciaHospede
    ControladoraPersistenciaHospede ..> BancoDeDados
    ControladoraPersistenciaHospede ..> sqlite3
    ControladoraPersistenciaHospede ..> Hospede
    ControladoraPersistenciaHospede ..> HospedeDTO
    ControladoraPersistenciaHospede ..> Email

    class ControladoraServicoHospede {
      -persistencia: InterfacePersistenciaHospede*
      +setControladoraPersistencia(persistencia: InterfacePersistenciaHospede*)
      +criar(hospede: Hospede): bool
      +editar(email: Email, hospede: Hospede): bool
      +remover(id: int): bool
      +listarTodos(): vector<HospedeDTO>
      +pesquisar(id: int): optional<HospedeDTO>
    }
    ControladoraServicoHospede --|> InterfaceServicoHospede
    ControladoraServicoHospede ..> InterfacePersistenciaHospede
    ControladoraServicoHospede ..> ControladoraPersistenciaHospede
    ControladoraServicoHospede ..> Hospede
    ControladoraServicoHospede ..> HospedeDTO
    ControladoraServicoHospede ..> Email
  }

  package "pacote_hotel" {
    interface InterfaceApresentacaoHotel {
      +setControladoraServicoHotel(servico: InterfaceServicoHotel*)
      +exibirMenuCRUD()
      +~InterfaceApresentacaoHotel()
    }

    interface InterfacePersistenciaHotel {
      +inserir(hotel: Hotel): bool
      +autenticar(email: string, senha: string): bool
      +atualizar(id: int, hotel: Hotel): bool
      +excluir(id: int): bool
      +listar(): vector<HotelDTO>
      +pesquisar(id: int): optional<HotelDTO>
      +~InterfacePersistenciaHotel()
    }

    interface InterfaceServicoHotel {
      +setControladoraPersistencia(persistencia: InterfacePersistenciaHotel*)
      +criar(hotel: Hotel): bool
      +editar(id: int, hotel: Hotel): bool
      +remover(id: int): bool
      +listarTodos(): vector<HotelDTO>
      +pesquisar(id: int): optional<HotelDTO>
      +~InterfaceServicoHotel()
    }

    class ControladoraApresentacaoHotel {
      -servico: InterfaceServicoHotel*
      -executando: bool
      +setControladoraServicoHotel(servico: InterfaceServicoHotel*)
      +exibirMenuCRUD()
      +criar()
      +listar()
      +atualizar()
      +remover()
    }
    ControladoraApresentacaoHotel --|> InterfaceApresentacaoHotel
    ControladoraApresentacaoHotel ..> InterfaceServicoHotel
    ControladoraApresentacaoHotel ..> IO
    ControladoraApresentacaoHotel ..> Menu
    ControladoraApresentacaoHotel ..> Tabela
    ControladoraApresentacaoHotel ..> Hotel
    ControladoraApresentacaoHotel ..> HotelDTO
    ControladoraApresentacaoHotel ..> Nome
    ControladoraApresentacaoHotel ..> Endereco
    ControladoraApresentacaoHotel ..> Telefone
    ControladoraApresentacaoHotel ..> Codigo
    ControladoraApresentacaoHotel ..> Utils
    ControladoraApresentacaoHotel ..> Formato

    class ControladoraPersistenciaHotel {
      +inserir(hotel: Hotel): bool
      +autenticar(email: string, senha: string): bool
      +listar(): vector<HotelDTO>
      +pesquisar(id: int): optional<HotelDTO>
      +atualizar(id: int, hotel: Hotel): bool
      +excluir(id: int): bool
    }
    ControladoraPersistenciaHotel --|> InterfacePersistenciaHotel
    ControladoraPersistenciaHotel ..> BancoDeDados
    ControladoraPersistenciaHotel ..> sqlite3
    ControladoraPersistenciaHotel ..> Hotel
    ControladoraPersistenciaHotel ..> HotelDTO

    class ControladoraServicoHotel {
      -persistencia: InterfacePersistenciaHotel*
      -executando: bool
      +setControladoraPersistencia(persistencia: InterfacePersistenciaHotel*)
      +criar(hotel: Hotel): bool
      +remover(id: int): bool
      +editar(id: int, hotel: Hotel): bool
      +listarTodos(): vector<HotelDTO>
      +pesquisar(id: int): optional<HotelDTO>
    }
    ControladoraServicoHotel --|> InterfaceServicoHotel
    ControladoraServicoHotel ..> InterfacePersistenciaHotel
    ControladoraServicoHotel ..> ControladoraPersistenciaHotel
    ControladoraServicoHotel ..> Hotel
    ControladoraServicoHotel ..> HotelDTO
  }

  package "pacote_quarto" {
    interface InterfaceApresentacaoQuarto {
      +setControladoraServicoQuarto(servico: InterfaceServicoQuarto*)
      +exibirMenuCRUD()
      +~InterfaceApresentacaoQuarto()
    }

    interface InterfacePersistenciaQuarto {
      +inserir(quarto: Quarto): bool
      +autenticar(email: string, senha: string): bool
      +atualizar(id: int, quarto: Quarto): bool
      +excluir(id: int): bool
      +listar(): vector<QuartoDTO>
      +pesquisar(id: int): optional<QuartoDTO>
      +~InterfacePersistenciaQuarto()
    }

    interface InterfaceServicoQuarto {
      +setControladoraPersistencia(persistencia: InterfacePersistenciaQuarto*)
      +criar(quarto: Quarto): bool
      +editar(id: int, quarto: Quarto): bool
      +remover(id: int): bool
      +listarTodos(): vector<QuartoDTO>
      +pesquisar(id: int): optional<QuartoDTO>
      +~InterfaceServicoQuarto()
    }

    class ControladoraApresentacaoQuarto {
      -servico: InterfaceServicoQuarto*
      -executando: bool
      +setControladoraServicoQuarto(servico: InterfaceServicoQuarto*)
      +exibirMenuCRUD()
      +criar()
      +listar()
      +atualizar()
      +remover()
    }
    ControladoraApresentacaoQuarto --|> InterfaceApresentacaoQuarto
    ControladoraApresentacaoQuarto ..> InterfaceServicoQuarto
    ControladoraApresentacaoQuarto ..> IO
    ControladoraApresentacaoQuarto ..> Menu
    ControladoraApresentacaoQuarto ..> Tabela
    ControladoraApresentacaoQuarto ..> Quarto
    ControladoraApresentacaoQuarto ..> QuartoDTO

    class ControladoraPersistenciaQuarto {
      +inserir(quarto: Quarto): bool
      +autenticar(email: string, senha: string): bool
      +listar(): vector<QuartoDTO>
      +pesquisar(id: int): optional<QuartoDTO>
      +atualizar(id: int, quarto: Quarto): bool
      +excluir(id: int): bool
    }
    ControladoraPersistenciaQuarto --|> InterfacePersistenciaQuarto
    ControladoraPersistenciaQuarto ..> BancoDeDados
    ControladoraPersistenciaQuarto ..> sqlite3
    ControladoraPersistenciaQuarto ..> Quarto
    ControladoraPersistenciaQuarto ..> QuartoDTO

    class ControladoraServicoQuarto {
      -servico: InterfaceServicoQuarto*  ' este membro parece ser incorreto no código, mas mantemos a declaração
      +exibirMenu()
      +exibirMenuCRUD()
      +criar(quarto: Quarto): bool
      +remover(id: int): bool
      +editar(id: int, quarto: Quarto): bool
      +listarTodos(): vector<QuartoDTO>
      +pesquisar(id: int): optional<QuartoDTO>
    }
    ControladoraServicoQuarto --|> InterfaceServicoQuarto
    ControladoraServicoQuarto ..> Formato
    ControladoraServicoQuarto ..> IO
  }

  package "pacote_reserva" {
    interface InterfaceApresentacaoReserva {
      +setControladoraServicoReserva(servico: InterfaceServicoReserva*)
      +exibirMenuCRUD()
      +~InterfaceApresentacaoReserva()
    }

    interface InterfacePersistenciaReserva {
      +inserir(reserva: Reserva): bool
      +autenticar(email: string, senha: string): bool
      +atualizar(id: int, reserva: Reserva): bool
      +excluir(id: int): bool
      +listar(): vector<ReservaDTO>
      +pesquisar(id: int): optional<ReservaDTO>
      +~InterfacePersistenciaReserva()
    }

    interface InterfaceServicoReserva {
      +setControladoraPersistencia(persistencia: InterfacePersistenciaReserva*)
      +criar(reserva: Reserva): bool
      +editar(id: int, reserva: Reserva): bool
      +remover(id: int): bool
      +listarTodos(): vector<ReservaDTO>
      +pesquisar(id: int): optional<ReservaDTO>
      +~InterfaceServicoReserva()
    }

    class ControladoraApresentacaoReserva {
      -servico: InterfaceServicoReserva*
      +setControladoraServicoReserva(servico: InterfaceServicoReserva*)
      +exibirMenuCRUD()
      +criar()
      +listar()
      +atualizar()
      +remover()
    }
    ControladoraApresentacaoReserva --|> InterfaceApresentacaoReserva
    ControladoraApresentacaoReserva ..> InterfaceServicoReserva
    ControladoraApresentacaoReserva ..> IO
    ControladoraApresentacaoReserva ..> Formato
    ControladoraApresentacaoReserva ..> Menu
    ControladoraApresentacaoReserva ..> Tabela
    ControladoraApresentacaoReserva ..> Reserva
    ControladoraApresentacaoReserva ..> ReservaDTO

    class ControladoraPersistenciaReserva {
      +inserir(reserva: Reserva): bool
      +autenticar(email: string, senha: string): bool
      +listar(): vector<ReservaDTO>
      +pesquisar(id: int): optional<ReservaDTO>
      +atualizar(id: int, reserva: Reserva): bool
      +excluir(id: int): bool
    }
    ControladoraPersistenciaReserva --|> InterfacePersistenciaReserva
    ControladoraPersistenciaReserva ..> BancoDeDados
    ControladoraPersistenciaReserva ..> sqlite3
    ControladoraPersistenciaReserva ..> Reserva
    ControladoraPersistenciaReserva ..> ReservaDTO

    class ControladoraServicoReserva {
      +exibirMenu(): bool
      +exibirMenuCRUD(): bool
      +criar(reserva: Reserva): bool
      +editar(id: int, reserva: Reserva): bool
      +remover(id: int): bool
      +listarTodos(): vector<ReservaDTO>
      +pesquisar(id: int): optional<ReservaDTO>
    }
    ControladoraServicoReserva --|> InterfaceServicoReserva
    ControladoraServicoReserva ..> Reserva
    ControladoraServicoReserva ..> ReservaDTO
    ControladoraServicoReserva ..> IO
    ControladoraServicoReserva ..> Tabela
    ControladoraServicoReserva ..> Utils
  }

  package "ControladoraPersistenciaSolicitacaoHospedagem" {
    class ControladoraPersistenciaSolicitacaoHospedagem {
      +inicializar()
      +salvar(s: SolicitacaoHospedagem)
      +buscarPorEmail(email: string): vector<SolicitacaoHospedagem>
      +buscarPorStatus(status: int): vector<SolicitacaoHospedagem>
      +atualizar(s: SolicitacaoHospedagem)
    }
    ControladoraPersistenciaSolicitacaoHospedagem ..> BancoDeDados
    ControladoraPersistenciaSolicitacaoHospedagem ..> sqlite3
    ControladoraPersistenciaSolicitacaoHospedagem ..> SolicitacaoHospedagem
    ControladoraPersistenciaSolicitacaoHospedagem ..> EnumConversor
    ControladoraPersistenciaSolicitacaoHospedagem ..> Data
  }
}


' ===========================================================================
' Fabrica Genérica
' ===========================================================================
package "sistema.sub_sistema.pacote_fabrica" {
  interface InterfaceFabricaGerenciavel {
    +criar(): unique_ptr<MenuCRUD>
    +~InterfaceFabricaGerenciavel()
  }

  class "FabricaGerenciavel<T>" as FabricaGerenciavelT {
    +criar(): shared_ptr<T>
    +ler()
    +atualizar()
    +remover()
    +executarMenu(tituloStr: string, executando: bool&)
  }

  FabricaGerenciavelT ..> Menu
  FabricaGerenciavelT ..> IO
  FabricaGerenciavelT ..> Formato
}


' ===========================================================================
' Principais dependências cruzadas
' ===========================================================================
ControladoraApresentacaoAcessoGerente ..> Versao : exibe versões via IO
Sistema ..> BancoDeDados : inicializa tabelas
ControladoraPersistenciaGerente ..> Versao : (implícito via projeto global)
ControladoraPersistenciaHotel ..> Versao : (implícito via projeto global)

@enduml
