@startuml Login de Gerente

title Fluxo de Autenticação (Login)

' ---------------------------------
' PARTICIPANTES (Camadas e Classes)
' ---------------------------------
actor Cliente as A
boundary ControladorInterfaceGerenteAutenticavel as CIG
control ServicoAutenticavel as SA
database PersistenciaGerente as PG

' ---------------------------------
' FLUXO PRINCIPAL: fazerLogin()
' ---------------------------------

A -> CIG : requer Login
activate CIG

CIG -> CIG : solicita Email e Senha
CIG -> CIG : recebe Email e Senha (Input de Usuário)

' *** PASSO ADICIONADO: Criação e Validação dos Domínios ***
CIG -> CIG : Cria e Valida Domínios Email e Senha
alt Domínios Inválidos
    CIG -> CIG : exibe "Erro de formato."
    CIG --> A : Retorna Erro
    deactivate CIG
    return
end

' O Controlador (Apresentação) repassa a requisição ao Serviço
CIG -> SA : autenticar(Email, Senha)
activate SA

    ' O Serviço garante a validade dos dados e solicita ao Persistência
    SA -> PG : autenticarGerente(email, senha)
    activate PG

        PG -> PG : Acesso ao Banco de Dados (e.g., SQLite)
        PG -> PG : Busca registro por Email e Senha

        alt Credenciais Válidas
            PG --> SA : Retorna true (Gerente encontrado)
        else Credenciais Inválidas
            PG --> SA : Retorna false
        end

    deactivate PG

    ' O Serviço atualiza o estado de login
    alt Sucesso na Autenticação (true)
        SA -> SA : atualiza estaLogado = true
        SA --> CIG : Retorna true (Logado com sucesso)
    else Falha na Autenticação (false)
        SA --> CIG : Retorna false (Erro de autenticação)
    end

deactivate SA

' O Controlador exibe o resultado para o usuário
alt Sucesso
    CIG -> CIG : exibe "Login realizado com sucesso."
    CIG -> CIG : exibe Menu Principal do Gerente
else Falha
    CIG -> CIG : exibe "Erro: Email ou Senha inválidos."
end

CIG --> A : Menu ou Mensagem de Erro

deactivate CIG

@enduml